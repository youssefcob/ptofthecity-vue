import{d as S,r as u,K as w,o as A,M as E,c as b,b as n,g as d,u as L,D as $,I as F,N as R,F as T,e as Z,O as z,f as W,a as p,P as Y,k as q,w as H,t as M,R as K,_ as O}from"./index-CB6J9zzv.js";const Q={class:"clinics-wrapper"},U={class:"form-map-wrapper"},X={class:"input-wrapper"},j={class:"input-fields"},G={class:"map-wrapper"},J={class:"results-wrapper"},ss={class:"name"},ts={class:"address ps"},es=S({__name:"ClinicsPage",props:{location:{type:String}},setup(k){const g=k,h="AIzaSyDolB5zXSKaL7Y3e08W9WLSwQYWaXVfYIQ",l=u(w.value),I=(t,s=300)=>{let o;return function(...e){clearTimeout(o),o=setTimeout(()=>t.apply(this,e),s)}},N=async t=>(await K.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${t}&key=${h}`)).data.results[0].geometry.location,P=async t=>{if(t.length<5)return;let{lat:s,lng:o}=await N(t);const e=10;l.value=l.value.filter(a=>{const r=m(s,o,Number(a.lat),Number(a.long));return console.log(r),r<=e}),console.log(l.value)},V=t=>{l.value=l.value.filter(o=>{const e=m(t.lat,t.lng,Number(o.lat),Number(o.long));return console.log(e),e<=10})};function m(t,s,o,e){function a(D){return D*(Math.PI/180)}const r=6371,_=a(o-t),C=a(e-s),y=Math.sin(_/2)*Math.sin(_/2)+Math.cos(a(t))*Math.cos(a(o))*Math.sin(C/2)*Math.sin(C/2),x=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return r*x}const B=I(async t=>await P(t),400),f=t=>{t=="All Clinics"?l.value=w.value:t=="Nearest"?navigator.geolocation&&navigator.geolocation.getCurrentPosition(s=>{let o={lat:s.coords.latitude,lng:s.coords.longitude};V(o)}):t&&(l.value=z[t])},i=u(g.location||"All Clinics"),c=u(""),v=()=>{console.log(i.value),f(i.value),B(c.value)};return A(async()=>{await E(),f(i.value)}),(t,s)=>{const o=W("router-link");return p(),b("div",Q,[s[7]||(s[7]=n("h1",null,"locate your closest clinic",-1)),n("div",U,[n("div",X,[n("div",j,[d($,{background:"#C7E3E8",placeHolder:"Borough",list:["All Clinics",...L(Y)],onInput:s[0]||(s[0]=e=>v()),modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=e=>i.value=e),default:g.location||"All Clinics"},null,8,["list","modelValue","default"]),d(F,{background:"#C7E3E8",placeHolder:"Zip Code",onInput:s[2]||(s[2]=e=>v()),modelValue:c.value,"onUpdate:modelValue":s[3]||(s[3]=e=>c.value=e),numbersOnly:""},null,8,["modelValue"])]),s[4]||(s[4]=n("h2",{class:"desktop"},"Results",-1))]),n("div",G,[d(R,{positions:l.value},null,8,["positions"])]),s[5]||(s[5]=n("h2",{class:"mobile"},"Results",-1))]),n("div",J,[(p(!0),b(T,null,Z(l.value,(e,a)=>(p(),q(o,{to:`/clinic/${e.id.toString()}`,class:"single-result"},{default:H(()=>[n("span",ss,M(e.name),1),s[6]||(s[6]=n("br",null,null,-1)),n("span",ts,M(e.street_address),1)]),_:2},1032,["to"]))),256))])])}}}),ls=O(es,[["__scopeId","data-v-1f5c25d2"]]);export{ls as default};
