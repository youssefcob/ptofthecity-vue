import{d as N,r as u,K as y,o as S,M as A,c as w,b as o,g as d,u as E,D as L,I as $,N as F,F as R,e as T,O as Z,f as z,a as p,P as W,k as Y,w as q,t as M,R as H,_ as K}from"./index-CzpoFmYo.js";const O={class:"clinics-wrapper"},Q={class:"form-map-wrapper"},U={class:"input-wrapper"},X={class:"input-fields"},j={class:"map-wrapper"},G={class:"results-wrapper"},J={class:"name"},ss={class:"address ps"},ts=N({__name:"ClinicsPage",props:{location:{type:String}},setup(b){const m=b,h="AIzaSyDolB5zXSKaL7Y3e08W9WLSwQYWaXVfYIQ",l=u(y.value),k=(t,s=300)=>{let n;return function(...e){clearTimeout(n),n=setTimeout(()=>t.apply(this,e),s)}},I=async t=>(await H.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${t}&key=${h}`)).data.results[0].geometry.location,V=async t=>{if(t.length<5)return;let{lat:s,lng:n}=await I(t);const e=10;l.value=l.value.filter(a=>{const r=B(s,n,Number(a.lat),Number(a.long));return console.log(r),r<=e}),console.log(l.value)};function B(t,s,n,e){function a(D){return D*(Math.PI/180)}const r=6371,g=a(n-t),_=a(e-s),C=Math.sin(g/2)*Math.sin(g/2)+Math.cos(a(t))*Math.cos(a(n))*Math.sin(_/2)*Math.sin(_/2),x=2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C));return r*x}const P=k(async t=>await V(t),400),f=t=>{t=="All Clinics"?l.value=y.value:t&&(l.value=Z[t])},i=u(m.location||"All Clinics"),c=u(""),v=()=>{console.log(i.value),f(i.value),P(c.value)};return S(async()=>{await A(),f(i.value)}),(t,s)=>{const n=z("router-link");return p(),w("div",O,[s[7]||(s[7]=o("h1",null,"locate your closest clinic",-1)),o("div",Q,[o("div",U,[o("div",X,[d(L,{background:"#C7E3E8",placeHolder:"Borough",list:["All Clinics",...E(W)],onInput:s[0]||(s[0]=e=>v()),modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=e=>i.value=e),default:m.location||"All Clinics"},null,8,["list","modelValue","default"]),d($,{background:"#C7E3E8",placeHolder:"Zip Code",onInput:s[2]||(s[2]=e=>v()),modelValue:c.value,"onUpdate:modelValue":s[3]||(s[3]=e=>c.value=e),numbersOnly:""},null,8,["modelValue"])]),s[4]||(s[4]=o("h2",{class:"desktop"},"Results",-1))]),o("div",j,[d(F,{positions:l.value},null,8,["positions"])]),s[5]||(s[5]=o("h2",{class:"mobile"},"Results",-1))]),o("div",G,[(p(!0),w(R,null,T(l.value,(e,a)=>(p(),Y(n,{to:`/clinic/${e.id.toString()}`,class:"single-result"},{default:q(()=>[o("span",J,M(e.name),1),s[6]||(s[6]=o("br",null,null,-1)),o("span",ss,M(e.street_address),1)]),_:2},1032,["to"]))),256))])])}}}),ns=K(ts,[["__scopeId","data-v-fba5834e"]]);export{ns as default};
