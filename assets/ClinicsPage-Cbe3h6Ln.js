import{d as D,r as m,U as b,o as S,V as E,c as w,b as l,g,u as L,D as Z,I as $,W as z,F,e as T,X as W,f as Y,a as v,Y as R,k as U,w as X,t as N,Z as q,_ as H}from"./index-C3MnJM56.js";const Q={class:"clinics-wrapper"},j={class:"form-map-wrapper"},K={class:"input-wrapper"},O={class:"input-fields"},G={class:"map-wrapper"},J={class:"results-wrapper"},ss={class:"name"},ts={class:"address ps"},es=D({__name:"ClinicsPage",props:{location:{type:String}},setup(k){const f=k,M="AIzaSyDolB5zXSKaL7Y3e08W9WLSwQYWaXVfYIQ",a=m(b.value),h=(t,s=300)=>{let o;return function(...e){clearTimeout(o),o=setTimeout(()=>t.apply(this,e),s)}},I=async t=>(await q.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${t}&key=${M}`)).data.results[0].geometry.location,V=async t=>{if(t.length<5)return;let{lat:s,lng:o}=await I(t);const e=8;a.value=a.value.filter(n=>{const i=u(s,o,Number(n.lat),Number(n.long));return console.log(i),i<=e}).sort((n,i)=>{const c=u(s,o,Number(n.lat),Number(n.long)),d=u(s,o,Number(i.lat),Number(i.long));return c-d}),console.log(a.value)},B=t=>{a.value=a.value.filter(o=>{const e=u(t.lat,t.lng,Number(o.lat),Number(o.long));return console.log(e),e<=1.6})};function u(t,s,o,e){function n(A){return A*(Math.PI/180)}const i=6371,c=n(o-t),d=n(e-s),y=Math.sin(c/2)*Math.sin(c/2)+Math.cos(n(t))*Math.cos(n(o))*Math.sin(d/2)*Math.sin(d/2),x=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return i*x}const P=h(async t=>await V(t),400),_=t=>{t=="All Clinics"?a.value=b.value:t=="Nearest"?navigator.geolocation&&navigator.geolocation.getCurrentPosition(s=>{let o={lat:s.coords.latitude,lng:s.coords.longitude};B(o)}):t&&(a.value=W[t])},r=m(f.location||"All Clinics"),p=m(""),C=()=>{console.log(r.value),_(r.value),P(p.value)};return S(async()=>{await E(),_(r.value)}),(t,s)=>{const o=Y("router-link");return v(),w("div",Q,[s[7]||(s[7]=l("h1",null,"locate your closest clinic",-1)),l("div",j,[l("div",K,[l("div",O,[g(Z,{background:"#C7E3E8",placeHolder:"Borough",list:["All Clinics",...L(R)],onInput:s[0]||(s[0]=e=>C()),modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=e=>r.value=e),default:f.location||"All Clinics"},null,8,["list","modelValue","default"]),g($,{background:"#C7E3E8",placeHolder:"Zip Code",onInput:s[2]||(s[2]=e=>C()),modelValue:p.value,"onUpdate:modelValue":s[3]||(s[3]=e=>p.value=e),numbersOnly:""},null,8,["modelValue"])]),s[4]||(s[4]=l("h2",{class:"desktop"},"Results",-1))]),l("div",G,[g(z,{zoom:9.8,positions:a.value},null,8,["positions"])]),s[5]||(s[5]=l("h2",{class:"mobile"},"Results",-1))]),l("div",J,[(v(!0),w(F,null,T(a.value,(e,n)=>(v(),U(o,{to:`/clinic/${e.id.toString()}`,class:"single-result"},{default:X(()=>[l("span",ss,N(e.name),1),s[6]||(s[6]=l("br",null,null,-1)),l("span",ts,N(e.street_address),1)]),_:2},1032,["to"]))),256))])])}}}),ls=H(es,[["__scopeId","data-v-015c6a42"]]);export{ls as default};
